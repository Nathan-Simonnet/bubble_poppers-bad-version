let smollBubbles,mediumBubbles,grandeBubbles;function handleResize(){let e=window.innerWidth;e<568?(smollBubbles=!0,mediumBubbles=!1,grandeBubbles=!1):e>568&&e<1024?(smollBubbles=!1,mediumBubbles=!0,grandeBubbles=!1):(smollBubbles=!1,mediumBubbles=!1,grandeBubbles=!0)}window.addEventListener("resize",handleResize),handleResize();const createParticle=(e,t,n)=>{let l=document.createElement("div");l.classList.add("particle"),n&&l.classList.add("golden"),document.body.appendChild(l),l.style.left=e+"px",l.style.top=t+"px";let o=200*Math.random()-100,r=200*Math.random()-100;l.style.setProperty("--x",`${o}px`),l.style.setProperty("--y",`${r}px`),l.style.animation="particleAnimation 0.5s ease-out",l.addEventListener("animationend",()=>{l.remove()})},pop=()=>{let e=new Audio;e.src="./bubble-docs/pop.m4a",e.play()},coin=()=>{let e=new Audio;e.src="./bubble-docs/coin.mp3",e.play()};document.addEventListener("click",e=>{let t=e.target.closest(".bubbles"),n=e.target.closest(".golden"),l=e.clientX,o=e.clientY;if(t&&n){coin(),counter+=5,n.remove();for(let r=0;r<10;r++)createParticle(l,o,!0);document.querySelector("h1").textContent=counter}else if(t){pop(),counter++,t.remove();for(let s=0;s<10;s++)createParticle(l,o);document.querySelector("h1").textContent=counter}});const bestScore=document.getElementById("best-score");window.localStorage.previousBestScore&&(bestScore.textContent=window.localStorage.previousBestScore);let pepTalk=[];fetch("anti-pep-talk.json").then(e=>e.json()).then(e=>pepTalk=e.pep);const range=document.getElementById("range-speed"),rangeInstructions=document.getElementById("range-instructions");let rangeSettings;rangeSettings=range.value,range.addEventListener("input",e=>{1==range.value?rangeInstructions.textContent="Slow":2==range.value?rangeInstructions.textContent="Not that slow":3==range.value?rangeInstructions.textContent="Quite fast":rangeInstructions.textContent="Sonic speed!!",rangeSettings=range.value});const party=()=>{let e=document.createElement("div");e.classList.add("confettis"),document.body.appendChild(e),e.style.left="50%",e.style.top="50%";let t=200*Math.random(),n=Math.random()>.5?t:-t,l=600*Math.random()-100,o=Math.floor(250*Math.random());e.style.setProperty("--confettiColor",`${o}`),e.style.setProperty("--x",`${n}px`),e.style.setProperty("--y",`${l}px`),e.style.animation="particleAnimation 3s ease-out",e.addEventListener("animationend",()=>{e.remove()})},main=document.querySelector("main"),bubblesMaker=function(e){let t=document.createElement("span");document.body.appendChild(t),t.classList.add("bubbles"),1==rangeSettings?(t.classList.add("slow"),setTimeout(()=>{t.remove()},8e3)):2==rangeSettings?(t.classList.add("medium"),setTimeout(()=>{t.remove()},6e3)):3==rangeSettings?(t.classList.add("fast"),setTimeout(()=>{t.remove()},5e3)):(t.classList.add("sonic"),setTimeout(()=>{t.remove()},4e3)),e?(t.classList.add("golden"),bubbleAnim(t,!0)):bubbleAnim(t,!1)},bubbleAnim=function(e,t){let n,l=Math.floor(100*Math.random());if(t)n=smollBubbles?140:mediumBubbles?160:200,e.style.setProperty("--leftFromAnim",l+"%"),e.style.setProperty("--leftToAnim","50%"),e.style.width=n-60+"px",e.style.height=n-60+"px";else{n=smollBubbles?Math.floor(100*Math.random())+50:mediumBubbles?Math.floor(150*Math.random())+100:Math.floor(200*Math.random())+100;let o=Math.floor(100*Math.random());e.style.width=n+"px",e.style.height=n+"px",e.style.setProperty("--hueRotateAnim",Math.floor(350*Math.random()+100)+"deg"),e.style.setProperty("--leftFromAnim",l+"%"),e.style.setProperty("--leftToAnim",(Math.random()>.5?o:-o)+"%")}},endGame=function(){let e=document.querySelectorAll(".bubbles");if(e.forEach(e=>{e.remove()}),document.querySelectorAll(".to-hide").forEach(e=>{document.querySelector("label").textContent="Recommencer",e.classList.remove("hidden")}),bestScore.textContent<counter){bestScore.textContent=counter,window.localStorage.previousBestScore=counter;let t=Math.floor(Math.random()*pepTalk.length);document.querySelector("label").textContent=pepTalk[t]}for(let n=0;n<60;n++)party();document.getElementById("encouragingDisplay").textContent=pepTalk[Math.floor(Math.random()*pepTalk.length)]};let endGameTrigger,counter;const startGame=function(){endGameTrigger=!0,document.querySelectorAll(".to-hide").forEach(e=>{e.classList.add("hidden")}),counter=0,document.querySelector("h1").textContent=counter,setTimeout(()=>{endGameTrigger=!1},3e4),setTimeout(()=>{bubblesMaker(!0)},Math.ceil(3e4*Math.random()));let e=()=>{if(!0!==endGameTrigger)return endGame();setTimeout(()=>{bubblesMaker(),e()},200)};e()};document.getElementById("go-btn").addEventListener("click",()=>{startGame()});